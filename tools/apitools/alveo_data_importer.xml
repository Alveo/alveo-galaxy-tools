<tool id="alveo_data_importer" name="Get Item URLs for Item List + API Key" version="0.01">
    <description>Stores API Key and Retrieves Item URLs from an Alveo Item List
        Version called directly from the Alveo web application
    </description>

    <requirements>
        <requirement type="package" version="1.0.4">pyalveo</requirement>
    </requirements>

    <command interpreter="python">
        alveo_data_importer.py --api_key $api_key --item_list_url $item_list --outputkey $outputkey --output $output
    </command>

    <inputs>
        <param name="api_key" type="text" size="30" label="API Key" help="Your Alveo API key"/>
        <param name="item_list" type="text" label="Alveo Item List URL" help="The Alveo Item List you wish to import"/>
        <param name="job_name" type="text" size="25"
               label="Supply a name for the outputs to remind you what they contain" value="Item List"/>
    </inputs>

    <outputs>
        <data format="auth_token" name="outputkey" label="Alveo API key" />
        <data format="item_list" name="output" label="${job_name}"/>
    </outputs>

    <tests>
        <test>
            <!-- expect this to fail unless you enter a valid API key here and copy it to
                     the result file -->
            <param name="api_key" value="your api key here" />

            <param name="import_list" value="item-lists.dat"/>
            <param name="item_list_url" value="https://app.alveo.edu.au/item_lists/180"/>
            <param name="job_name" value="test_output_180.dat"/>
            <output name="outputkey" file="api-key.dat" compare="contains" />
            <output name="output" file="item_list_180.dat"/>
        </test>
    </tests>

    <help>Store an API Key and get the URLs of all of the items from an Alveo item list.
    This is a combination of the "Store Alveo API Key" and "Get Item URLs for Item List"
    tools written so that it can be called directly from the Alveo web application
    item list page.</help>
    <citations>
        <citation type='bibtex'>
            @article{cassidy2014alveo,
              title={The {Alveo Virtual Laboratory}: a web based repository API},
              author={Cassidy, Steve and Estival, Dominique and Jones, Tim and Sefton, Peter and Burnham, Denis and Burghold, Jared and others},
              year={2014},
              publisher={Reykjavik, Iceland: European Language Resources Association}
            }
        </citation>
    </citations>
</tool>
